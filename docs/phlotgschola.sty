\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{phlotgschola}[2014/07/24 TGSchola Font w/ math]

% New Century Schoolbook-eqsue font w/ math support
\RequirePackage{fouriernc}

% Don't use fouriernc's calligraphic and blackboard-bold fonts
%\DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n}
\RequirePackage[cal=cm,calscaled=0.98,bb=ams,bbscaled=0.98]{mathalfa}

% Sneaky fouriernc does \let\mathbb\math@bb in AtBeginDocument. Undo that.
\let\mathbb@saved\mathbb
\AtBeginDocument{\let\mathbb\mathbb@saved}

% Maybe don't use tgschola, and instead reduce the baselineskip a bit?
%\def\baselinestretch{0.9}

% Nicer New Century Schoolbook-esque font but w/o math support
\RequirePackage[matchuppercase]{tgschola}

% Silence warnings about missing slanted shape
\AtBeginDocument{%
  \sbox0{\fontencoding{T1}\fontfamily{qcs}%
         \fontseries{m}\fontshape{it}%
         \selectfont X}%
  \DeclareFontShape{T1}{qcs}{m}{sl}{<->ssub*qcs/m/it}{}%
}

% Microtype settings
\RequirePackage{ifdraft}
\ifdraft{}{
  \RequirePackage{microtype}
  \DeclareMicrotypeSet{custom}{
    encoding = {OT1,T1,OML,OMS},
    font = {U/msa/*/*/*, U/msb/*/*/*}}
  \UseMicrotypeSet{custom}
}